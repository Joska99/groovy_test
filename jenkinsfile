node('agent1') {
    stage('test') {
        sh 'ls -lah'
        sh 'env'
    }
    stage('Multy-branch') {
        if (env.BRANCH_NAME == 'main') {
            stage('main') {
                echo 'main trigger'
                echo "$env.BRANCH_NAME"
            }
        } else {
            stage('dev-Docker-build') {
                def myEnv = docker.build 'my-environment:snapshot'
                docker ps
            }
            stage('dev-Docker-build') {
                echo 'other branch'
                echo "$env.BRANCH_NAME"
            }
            stage('dev') {
                echo 'other branch'
                echo "$env.BRANCH_NAME"
            }
        }
    }
}

