pipeline { 
    agent {
        label 'agent1'
    }
    environment  {
        // Docker
        IMG_NAME_APP = 'weather-app'
        VERSION = 'jenkins'
        // Helm
        HELM_PACKAGE_DIR = ''
        HELM_PACKAGE = ''
        HELM_REPO = ''
    }

    stages {
        stage('checkout code') {
            steps {
                checkout scm
            }
        }
        stage('build docker image') {
            when {
                branch 'main'
            }
            steps {
                script {
                    sh "echo $env.BRANCH_NAME"
                    docker.build("${IMG_NAME_APP}:${VERSION}")
                    sh 'docekr images'
                }
            }
        }
    }
}
